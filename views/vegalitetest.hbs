<h2> This page is a test for how vega lite works in web pages. </h2>

<!-- Dependencies for vega lite. -->
<script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>

<!-- Container for the visualization -->
<div id="vis"></div>
<!-- Script for the visualization specification. --> 
<script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec = {
    $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
    data: {
      values: [
        { a: 'C', b: 2 },
        { a: 'C', b: 7 },
        { a: 'C', b: 4 },
        { a: 'D', b: 1 },
        { a: 'D', b: 2 },
        { a: 'D', b: 6 },
        { a: 'E', b: 8 },
        { a: 'E', b: 4 },
        { a: 'E', b: 7 }
      ]
    },
    mark: 'bar',
    encoding: {
      y: { field: 'a', type: 'nominal' },
      x: {
        aggregate: 'average',
        field: 'b',
        type: 'quantitative',
        axis: {
          title: 'Average of b'
        }
      }
    }
  };

  // Embed the visualization in the container with id `vis`
  vegaEmbed('#vis', vlSpec);
</script>

<div id="vis2"></div>
<script> 
  import axios from 'https://cdn.skypack.dev/axios';
  // Fetch data from API. 
  const dataSet = async function getData() {
    return await axios.get('/api/data');
  }

  var vegaDataFormat;
  const labels = ["a", "b", "c", "d", "e"]
  dataSet.forEach(function(elem) => {
    vegaDataFormat = vegaDataFormat + "{" + elem + 
  })

  var vlSpec = {
    "$schema": 'https://vega.github.io/schema/vega-lite/v5.json',
    "data": {

    },
    "mark": "bar",
    "encoding": {
      "x": {"field": "a", "type": "nominal", "axis": {"labelangle": 0}},
      "y": {"field": "b", "type": "quantitative"}
    }
  }
</script>